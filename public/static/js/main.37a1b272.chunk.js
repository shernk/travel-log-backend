(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n.n(c),i=n(79),o=n.n(i),s=(n(88),n(89),n(90),n(91),n(92),n(18)),l=n(8),u=n.n(l),d=n(16),j=n(12),b=n(14),p="".concat("http://localhost:1337","/api/routes");function f(){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+"/"+t,{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y={id:"clusters",type:"circle",source:"earthquakes",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}},v={id:"cluster-count",type:"symbol",source:"earthquakes",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}},k={id:"unclustered-point",type:"circle",source:"earthquakes",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}},E=function(e){var t=e.onSelectCity,n=e.entries;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{id:"toggle",className:"control-panel viewport",children:[Object(r.jsx)("h3",{children:"The Marked Locations"}),Object(r.jsx)("hr",{}),n.filter((function(e){return e.title})).map((function(e,n){return Object(r.jsxs)("div",{className:"input",children:[Object(r.jsx)("input",{type:"radio",name:"city",id:"city-".concat(n),defaultChecked:"Seattle"===e.title,onClick:function(){return t(e)}}),Object(r.jsx)("label",{htmlFor:"city-".concat(n),children:e.title})]},"btn-".concat(n))}))]})})},S=c.memo(E);var w=function(e){e.lngLats,e.title;var t=e.viewport,n=e.entries,a=c.useCallback((function(e){var n=e.longitude,r=e.latitude;t({longitude:n,latitude:r,zoom:9,transitionInterpolator:new b.FlyToInterpolator({speed:2}),transitionDuration:"auto"})}),[t]);return Object(r.jsx)(S,{onSelectCity:a,entries:n})},D=c.memo(w),C=function(){return Object(r.jsxs)("div",{className:"zoom-control",children:[Object(r.jsx)("div",{className:"fullscreenControlStyle",children:Object(r.jsx)(b.FullscreenControl,{})}),Object(r.jsx)("div",{className:"navStyle",children:Object(r.jsx)(b.NavigationControl,{})})]})},N=function(e){var t=e.entry,n=e.setShowPopUp,c=e.deleteMarker;return Object(r.jsx)(b.Popup,{latitude:t.latitude,longitude:t.longitude,closeButton:!0,closeOnClick:!1,dynamicPosition:!0,anchor:"top",onClose:function(){return n({})},children:Object(r.jsxs)("div",{className:"popup",children:[Object(r.jsx)("h3",{children:t.title}),Object(r.jsx)("p",{children:t.comments}),Object(r.jsxs)("p",{htmlFor:"latitude",children:["Latitude: ",t.latitude]}),Object(r.jsxs)("p",{htmlFor:"longitude",children:["Longitude: ",t.longitude]}),Object(r.jsxs)("small",{children:["Visited on: ",new Date(t.visitDate).toLocaleDateString()]}),t.image&&Object(r.jsx)("img",{src:t.image,alt:t.title}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"edit-entry button-entry",children:"Edit"}),Object(r.jsx)("button",{className:"delete-entry button-entry",onClick:function(){return c(t._id)},children:"Delete"})]})]})})},T=function(){return Object(r.jsx)("svg",{height:20,viewBox:"0 0 24 24",style:{fill:"#d00",stroke:"none"},children:Object(r.jsx)("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})})},L=n(82),M=function(e){var t=e.location,n=e.onClose,a=Object(L.a)(),i=a.register,o=a.handleSubmit,s=Object(c.useState)(!1),l=Object(j.a)(s,2),b=l[0],p=l[1],f=Object(c.useState)(""),O=Object(j.a)(f,2),x=O[0],m=O[1],g=function(){var e=Object(d.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),r.latitude=t.latitude,r.longitude=t.longitude,e.next=6,h(r);case 6:n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m(e.t0.message),p(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{onSubmit:o(g),className:"entry-form",children:[x?Object(r.jsx)("h3",{className:"error",children:x}):null,Object(r.jsx)("label",{htmlFor:"title",children:"Title"}),Object(r.jsx)("input",{name:"title",required:!0,ref:i}),Object(r.jsx)("label",{htmlFor:"latitude",children:"Latitude"}),Object(r.jsx)("input",{name:"latitude",readOnly:!0,required:!0,ref:i,value:t.latitude}),Object(r.jsx)("label",{htmlFor:"longitude",children:"Longitude"}),Object(r.jsx)("input",{name:"longitude",readOnly:!0,required:!0,ref:i,value:t.longitude}),Object(r.jsx)("label",{htmlFor:"comments",children:"Comments"}),Object(r.jsx)("textarea",{name:"comments",rows:3,ref:i}),Object(r.jsx)("label",{htmlFor:"description",children:"Description"}),Object(r.jsx)("textarea",{name:"description",rows:3,ref:i}),Object(r.jsx)("label",{htmlFor:"image",children:"Image"}),Object(r.jsx)("input",{name:"image",ref:i}),Object(r.jsx)("label",{htmlFor:"visitDate",children:"Visit Date"}),Object(r.jsx)("input",{name:"visitDate",type:"date",required:!0,ref:i}),Object(r.jsx)("button",{className:"button-entry",disabled:b,children:b?"Loading...":"Create Entry"})]})},_=function(e){var t=e.addEntryLocation,n=e.setAddEntryLocation,c=e.getEntries;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.Marker,{latitude:t.latitude,longitude:t.longitude,offsetTop:-20,offsetLeft:-10,children:Object(r.jsx)(T,{})}),Object(r.jsx)(b.Popup,{latitude:t.latitude,longitude:t.longitude,closeButton:!0,closeOnClick:!1,dynamicPosition:!0,anchor:"top",onClose:function(){return n(null)},children:Object(r.jsx)("div",{className:"popup",children:Object(r.jsx)(M,{location:t,onClose:function(){n(null),c()}})})})]})},F=n(19),R=function(e){var t=e.entry,n=e.onMarkerDragStart,c=e.onMarkerDrag,a=e.onMarkerDragEnd,i=e.setShowPopUp,o=e.setGetTitle;return Object(r.jsx)(b.Marker,{latitude:t.latitude,longitude:t.longitude,offsetTop:-20,offsetLeft:-10,draggable:!0,onDragStart:n,onDrag:c,onDragEnd:a,children:Object(r.jsx)("div",{className:"pin",onClick:function(){i(Object(F.a)({},t._id,!0)),o(t.title)},children:Object(r.jsx)(T,{})})})},I=n(20),A=function(e){var t=e.selectedFeatureIndex,n=e.editorRef,a=e.setMode,i=Object(c.useCallback)((function(){null!==t&&t>=0&&n.current.deleteFeatures(t)}),[t,n]);return Object(r.jsx)("div",{className:"mapboxgl-ctrl-top-left",children:Object(r.jsxs)("div",{className:"mapboxgl-ctrl-group mapboxgl-ctrl",children:[Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_polygon",title:"Polygon tool (p)",onClick:function(){return a(new I.DrawPolygonMode)}}),Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_trash",title:"Delete",onClick:i})]})})};function P(e){e.feature;switch(e.state){case I.RENDER_STATE.SELECTED:case I.RENDER_STATE.HOVERED:case I.RENDER_STATE.UNCOMMITTED:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:7};default:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:5}}}function q(e){e.feature,e.index;switch(e.state){case I.RENDER_STATE.SELECTED:case I.RENDER_STATE.HOVERED:case I.RENDER_STATE.UNCOMMITTED:case I.RENDER_STATE.CLOSING:return{stroke:"rgb(251, 176, 59)",strokeWidth:2,fill:"rgb(251, 176, 59)",fillOpacity:.3,strokeDasharray:"4,2"};default:return{stroke:"rgb(60, 178, 208)",strokeWidth:2,fill:"rgb(60, 178, 208)",fillOpacity:.1}}}var U=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),o=Object(j.a)(i,2),s=o[0],l=o[1],u=Object(c.useRef)(null),d=Object(c.useCallback)((function(e){l(e&&e.selectedFeatureIndex)}),[]),b=Object(c.useCallback)((function(e){"addFeature"===e.editType&&a(new I.EditingMode)}),[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(I.Editor,{ref:u,style:{width:"100%",height:"100%"},clickRadius:12,mode:n,onSelect:d,onUpdate:b,editHandleShape:"circle",featureStyle:q,editHandleStyle:P}),Object(r.jsx)(A,{selectedFeatureIndex:s,editorRef:u,setMode:a})]})},z=function(){var e=Object(c.useRef)(null),t=Object(c.useState)([]),n=Object(j.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)({}),l=Object(j.a)(o,2),p=l[0],O=l[1],h=Object(c.useState)(null),x=Object(j.a)(h,2),g=x[0],E=x[1],S=Object(c.useState)({}),w=Object(j.a)(S,2),T=w[0],L=w[1],M=Object(c.useState)(""),F=Object(j.a)(M,2),I=F[0],A=F[1],P=Object(c.useState)({width:"100vw",height:"100vh",latitude:47.608013,longitude:-122.335167,zoom:9,bearing:0,pitch:0}),q=Object(j.a)(P,2),z=q[0],W=q[1],B=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,console.log(t),i(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){B()}),[]);var H=Object(c.useCallback)((function(e){L((function(t){return Object(s.a)(Object(s.a)({},t),{},{onDragStart:e.lngLat})}))}),[]),J=Object(c.useCallback)((function(e){L((function(t){return Object(s.a)(Object(s.a)({},t),{},{onDrag:e.lngLat})}))}),[]),V=Object(c.useCallback)((function(e){L((function(t){return Object(s.a)(Object(s.a)({},t),{},{onDragEnd:e.lngLat})})),G(e)}),[]),G=function(e){var t=Object(j.a)(e.lngLat,2),n=t[0],r=t[1];E({longitude:n,latitude:r})},Z=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return e.sent.filter((function(e){return e._id!==t})),m(t),e.next=7,B();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(b.default,Object(s.a)(Object(s.a)({},z),{},{mapStyle:"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay",mapboxApiAccessToken:"pk.eyJ1Ijoic2hlcmttaXNzIiwiYSI6ImNraXp5cWFlMDMwMjUzMGxydHB3b29tc24ifQ.Z7Lj7WW_2a0_2OeJrHcU-Q",onViewportChange:W,onDblClick:G,interactiveLayerIds:[y.id],onClick:function(t){try{var n=t.features[0],r=n.properties.cluster_id;e.current.getMap().getSource("earthquakes").getClusterExpansionZoom(r,(function(e,t){e||W(Object(s.a)(Object(s.a)({},z),{},{longitude:n.geometry.coordinates[0],latitude:n.geometry.coordinates[1],zoom:t,transitionDuration:500}))}))}catch(c){console.log(c)}},ref:e,children:[Object(r.jsxs)(b.Source,{id:"earthquakes",type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50,children:[Object(r.jsx)(b.Layer,Object(s.a)({},y)),Object(r.jsx)(b.Layer,Object(s.a)({},v)),Object(r.jsx)(b.Layer,Object(s.a)({},k))]}),a.map((function(e){return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(R,{entry:e,onMarkerDragStart:H,onMarkerDrag:J,onMarkerDragEnd:V,setShowPopUp:O,setGetTitle:A}),p[e._id]?Object(r.jsx)(N,{entry:e,setShowPopUp:O,deleteMarker:Z}):null]},e._id)})),g?Object(r.jsx)(_,{addEntryLocation:g,setAddEntryLocation:E,getEntries:B}):null,Object(r.jsxs)("div",{className:"control-zoom-panel",children:[Object(r.jsx)(D,{lngLats:T,title:I,viewport:W,entries:a}),Object(r.jsx)(C,{}),Object(r.jsx)(U,{})]})]}))};n(150);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(z,{})}),document.getElementById("root"))},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[152,1,2]]]);
//# sourceMappingURL=main.37a1b272.chunk.js.map